plugins {
  id "org.openapi.generator" version "6.3.0"
}


task cleanAll {
    doLast{    
        exec {
            workingDir './client'
            commandLine 'gradle', 'clean'
        }
    }   
}

task buildAll {
    dependsOn 'cleanAll'
    doLast{   
        exec {
            workingDir './client'
            commandLine 'gradle', 'build'
        }  
    }
}

task openapi(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask){
    generatorName = "kotlin"
    inputSpec = "$rootDir/spec/lambda-svc.yaml".toString()
    outputDir = "$rootDir/client".toString()
    groupId = "org.flaviolrita.lambdaorm"
    id= "lambdaorm.client"
    version = "1.0.0"
    packageName = "org.flaviolrita.lambdaorm"
    apiPackage = "org.flaviolrita.lambdaorm.api"
    invokerPackage = "org.flaviolrita.lambdaorm.invoker"
    modelPackage = "org.flaviolrita.lambdaorm.model"
    configOptions = [
            dateLibrary: "java8"
    ]
    globalProperties = [
            modelDocs: "false"
    ]
}